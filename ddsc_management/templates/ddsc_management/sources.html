{% extends "ddsc_management/base.html" %}
{% load i18n %}

{% block content %}
<div class="container-fluid">
<div class="row-fluid">
<div class="span6">
    <legend>{% trans 'All available sources' %}</legend>
    <table
        cellpadding="0" cellspacing="0" border="0"
        class="data-table table table-bordered table-hover"
        data-url="{% url ddsc_management.api.sources.list %}"
        data-delete-url="{% url ddsc_management.api.sources.delete %}"
        data-columns='[
            {
                "sName": "name",
                "sTitle": "{% trans 'Name' %}"
            },
            {
                "sName": "source_type",
                "sTitle": "{% trans 'Source type' %}"
            },
            {
                "sName": "manufacturer__name",
                "sTitle": "{% trans 'Manufacturer' %}"
            }
        ]'>
        <thead>
        </thead>
        <tbody></tbody>
        <tfoot>
        </tfoot>
    </table>
</div>
<div id="detail-view" class="span6">
    <div class="row">
        {% if action == 'detail' %}
            <legend>{% trans 'Details' %}</legend>
            <h2>{{ object.name }}</h2>
            <p>{{ object.details }}</p>
        {% elif action == 'add' %}
            {% url ddsc_management.sources.add as form_action %}
            {% with form=form form_id='add-form' form_header=_('Add item') action=form_action %}
            {% include 'ddsc_management/form.html' %}
            {% endwith %}
        {% elif action == 'edit' %}
            {% url ddsc_management.sources.edit pk=pk as form_action %}
            {% with form=form form_id='edit-form' form_header=_('Edit item') action=form_action %}
            {% include 'ddsc_management/form.html' %}
            {% endwith %}
        {% elif action == 'list' %}
            <p>{% trans 'No item selected.' %}</p>
        {% endif %}
    </div>
    <div class="row">
        <div class="span12">
            {% if action == 'detail' %}
            <a href="{% url ddsc_management.sources.edit pk=pk %}" class="btn btn-info dynamic-link" data-target="detail-view"><i class="icon-edit"></i> {% trans 'Edit item' %}</a>
            {% endif %}
            {% if action == 'detail' or action == 'list' %}
            <a href="{% url ddsc_management.sources.add %}" class="btn btn-info dynamic-link" data-target="detail-view"><i class="icon-plus"></i> {% trans 'Add a new item' %}</a>
            {% endif %}
            {% if action == 'edit' %}
                <a href="{% url ddsc_management.sources.detail pk=pk %}" class="btn dynamic-link" data-target="detail-view"><i class="icon-ban-circle"></i> {% trans 'Cancel' %}</a>
            {% endif %}
            {% if action == 'add' %}
                <a href="{% url ddsc_management.sources.list %}" class="btn dynamic-link" data-target="detail-view"><i class="icon-ban-circle"></i> {% trans 'Cancel' %}</a>
            {% endif %}
        </div>
    </div>
</div>
</div>
</div>
{% endblock %}
